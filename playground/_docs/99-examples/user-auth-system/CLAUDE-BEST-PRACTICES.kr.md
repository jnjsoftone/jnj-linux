# Claude Code 활용 Best Practices - 완벽 가이드

이 가이드는 사용자 인증 시스템 예제를 바탕으로 **전체 개발 생명주기에서 Claude Code를 효과적으로 활용하는 방법**을 정리합니다.

---

## 🎯 핵심 철학

### Claude와 함께하는 문서 우선 개발

```
전통적인 흐름:
  생각 → 코딩 → 문서화 (아마도)

Claude 최적화 흐름:
  생각 → 문서화 → Claude에게 질문 → 코딩 → 문서 업데이트
```

**왜 이것이 효과적인가**:
1. 문서가 Claude에게 완전한 컨텍스트를 제공
2. Claude는 잘 문서화된 요구사항으로부터 더 나은 코드를 생성
3. 문서가 항상 최신 상태 유지 (코드 변경과 함께 업데이트)
4. 팀에게 단일 진실 공급원(Single Source of Truth) 제공

---

## 📋 단계별 Claude 활용법

### 1-2주차: 요구사항 & 디자인

**Claude가 잘하는 것** ✅:
- 비즈니스 아이디어로부터 포괄적인 요구사항 목록 생성
- 엣지 케이스와 에러 시나리오 식별
- 디자인 시스템 토큰 생성 (색상, 타이포그래피, 간격)
- 컴포넌트 구조 생성 (Atomic Design)
- 접근성 개선 제안

**예제 워크플로우**:
```bash
1일차:
당신: "다음 기능들로 사용자 인증 시스템 프로젝트 개요를 만들어줘..."
Claude: [01-project-overview.md 생성]
당신: [검토, 비즈니스 컨텍스트 추가, 승인]

2일차:
당신: "이 개요를 바탕으로 기능 요구사항을 생성해줘..."
Claude: [20개의 상세 요구사항 생성]
당신: [검토, 우선순위 조정, 승인]

3일차:
당신: "shadcn/ui + Tailwind를 위한 디자인 시스템을 만들어줘..."
Claude: [완전한 색상/타이포그래피 토큰 생성]
당신: [프로젝트에 적용, 대비 비율 테스트]
```

**핵심 프롬프트**:
- [요구사항 프롬프트](./01-requirements/claude-prompts.md)
- [디자인 프롬프트](./02-design/claude-prompts.md)

---

### 3주차: 아키텍처 & 계획

**Claude가 잘하는 것** ✅:
- 요구사항으로부터 Prisma 데이터베이스 스키마 생성
- 도메인 중심 네이밍을 사용한 GraphQL 스키마 설계
- 시스템 아키텍처 다이어그램 생성 (Mermaid)
- 보안 취약점 식별
- 성능 최적화 제안

**예제 워크플로우**:
```bash
6일차:
당신: "이 데이터 모델들에 대한 Prisma 스키마를 생성해줘 [요구사항 붙여넣기]"
Claude: [관계, 인덱스를 포함한 완전한 스키마 생성]
당신: [검토, 필드 타입 조정, 마이그레이션 실행]

7일차:
당신: "인증 시스템을 위한 도메인 중심 네이밍을 따르는 GraphQL 스키마를 만들어줘"
Claude: [authUserRegister, authUserLogin 등의 typeDefs 생성]
당신: [네이밍 검토, 반환 타입 조정, 승인]
```

**핵심 프롬프트**:
- 데이터베이스 스키마 생성
- GraphQL 스키마 설계
- 보안 아키텍처 검토

---

### 3-6주차: 개발

**Claude가 잘하는 것** ✅:
- 요구사항으로부터 GraphQL resolver 생성
- JWT 인증 로직 구현
- TypeScript를 사용한 React 컴포넌트 생성
- Zod 검증 스키마 작성
- 유닛 테스트 및 통합 테스트 생성
- 복잡한 이슈 디버깅

**예제 워크플로우**:
```bash
# 백엔드 개발
당신: "코딩 컨벤션을 따라 REQ-AUTH-001(회원가입)에 대한 resolver를 생성해줘"
Claude: [검증, 에러 처리, 감사 로깅이 포함된 완전한 resolver 생성]
당신: [검토, 테스트, 에러 메시지 조정, 커밋]

# 프론트엔드 개발
당신: "이 GraphQL mutation과 매칭되는 react-hook-form + Zod로 LoginForm을 만들어줘"
Claude: [완전한 폼 컴포넌트 생성]
당신: [검토, UX 테스트, 스타일 조정, 커밋]

# 테스트
당신: "이 resolver에 대한 유닛 테스트를 생성해줘 [코드 붙여넣기]"
Claude: [정상 경로 + 에러를 포함하는 10-15개 테스트 케이스 생성]
당신: [검토, 엣지 케이스 추가, 테스트 실행]
```

**핵심 프롬프트**:
- [개발 프롬프트](./06-development/claude-prompts.md)

---

### 7-8주차: 테스트 & 배포

**Claude가 잘하는 것** ✅:
- 요구사항으로부터 테스트 케이스 생성
- 유닛 테스트 작성 (Jest)
- E2E 테스트 생성 (Playwright)
- 배포 스크립트 생성
- 모니터링 대시보드 생성

**예제 워크플로우**:
```bash
당신: "회원가입 → 로그인 전체 흐름에 대한 E2E 테스트를 생성해줘"
Claude: [페이지 객체와 함께 Playwright 테스트 생성]
당신: [검토, 테스트 실행, 불안정한 테스트 수정]
```

---

## 🎨 프롬프트 엔지니어링 패턴

### 패턴 1: 풍부한 컨텍스트 제공

**나쁨** ❌:
```
"로그인 폼을 만들어줘"
```

**좋음** ✅:
```
"사용자 인증 시스템을 위한 프로덕션 수준의 LoginForm 컴포넌트를 만들어줘.

**기술 스택**:
- Next.js 15 + App Router
- shadcn/ui 컴포넌트
- react-hook-form + Zod
- Apollo Client (GraphQL)
- TypeScript strict mode

**요구사항** (REQ-AUTH-003에서):
- 이메일과 비밀번호 필드
- 비밀번호 보기/숨기기 토글
- "자동 로그인" 체크박스
- "비밀번호 찾기?" 링크
- 제출 중 로딩 상태
- API 에러 표시

**디자인 시스템** (colors-typography.md에서):
- Primary 색상: #2563eb
- Border radius: 0.375rem
- Button 높이: 2.5rem
- shadcn/ui Button, Input, Card 사용

**GraphQL Mutation**:
```graphql
mutation AuthUserLogin($input: AuthUserLoginInput!) {
  authUserLogin(input: $input) {
    success
    accessToken
    refreshToken
    user { id email firstName }
  }
}
```

**검증** (Zod 스키마):
- 이메일: 올바른 형식
- 비밀번호: 필수 (최소 1자)

**접근성**:
- 모든 input에 ARIA 레이블
- 에러 알림
- 키보드 네비게이션
- 포커스 관리

import, 타입, 사용 예제를 포함한 완전한 컴포넌트를 제공해줘."
```

**왜 더 나은가**:
- Claude가 정확한 기술 스택을 알게 됨
- Claude가 요구사항과 디자인 제약사항을 볼 수 있음
- Claude가 호출할 GraphQL mutation을 알게 됨
- Claude가 검증 규칙을 알게 됨
- Claude가 접근성 요구사항을 알게 됨
- 결과물이 튜토리얼 예제가 아닌 프로덕션 수준이 됨

---

### 패턴 2: 반복적 개선

```
# 반복 1: 기본 구조 얻기
당신: "컨벤션을 따르는 로그인 resolver를 생성해줘 [문서 링크]"
Claude: [기본 resolver]

# 반복 2: 특정 기능 추가
당신: "이 resolver에 속도 제한(15분당 5회 시도)을 추가해줘 [코드 붙여넣기]"
Claude: [속도 제한이 있는 resolver]

# 반복 3: 보안 추가
당신: "감사 로깅과 계정 잠금(10회 실패)을 추가해줘 [코드 붙여넣기]"
Claude: [완전히 안전한 resolver]

# 반복 4: 테스트 추가
당신: "이 resolver에 대한 포괄적인 테스트를 생성해줘 [코드 붙여넣기]"
Claude: [15개 테스트 케이스가 있는 테스트 스위트]
```

**왜 효과적인가**:
- 각 반복이 집중적이고 검토 가능
- 코드에 대한 통제력 유지
- 문제를 조기에 발견 가능
- 최종 결과가 정확히 필요한 것

---

### 패턴 3: 기존 문서 참조

```
당신: "사용자 역할 할당 resolver를 생성해줘.

GraphQL 네이밍은 다음을 따라줘: /path/to/api/01-graphql-design.md
코딩 컨벤션 사용: /path/to/development/00-coding-conventions.md
데이터베이스 스키마는 여기에: /path/to/architecture/02-database-schema.md
요구사항은 여기에: 01-requirements/02-functional-requirements.md의 REQ-AUTH-013

도메인 중심 네이밍 사용 (assignRole이 아닌 userRoleAssign).
인증 체크 포함 ('user:update' 권한 필요).
할당 전에 roleIds가 존재하는지 검증.
역할 할당을 audit 테이블에 로깅."
```

**왜 효과적인가**:
- Claude가 따라야 할 정확한 패턴을 볼 수 있음
- 결과물이 기존 코드와 일관성 있음
- 네이밍이 컨벤션과 일치
- 리팩토링이 덜 필요함

---

## 🛡️ Claude가 할 수 있는 것 / 없는 것

### Claude가 탁월한 것 ✅

1. **코드 생성**:
   - 보일러플레이트 코드 (resolver, 컴포넌트, 스키마)
   - 예제의 패턴 따르기
   - 타입 정의
   - 검증 스키마
   - 테스트 케이스

2. **문서화**:
   - 구조화된 문서 생성
   - 템플릿 따르기
   - 누락된 정보 식별
   - 관련 문서 상호 참조

3. **분석**:
   - 엣지 케이스 식별
   - 보안 취약점 스캔
   - 코드 리뷰
   - 성능 최적화 제안

4. **리팩토링**:
   - 재사용 가능한 함수 추출
   - 타입 안전성 개선
   - 데이터베이스 쿼리 최적화
   - 에러 처리 개선

### Claude가 도움이 필요한 것 ❌

1. **비즈니스 결정**:
   - 기능 우선순위 결정
   - 범위 결정
   - 예산 할당
   - 일정 추정

2. **도메인 지식**:
   - 귀사의 특정 규칙
   - 산업 규제
   - 커스텀 워크플로우
   - 정치적 고려사항

3. **인프라**:
   - 특정 배포 환경 세부사항
   - 네트워크 구성
   - 데이터베이스 자격증명
   - 서드파티 서비스 통합 (API 문서 필요)

4. **실제 시스템 테스트**:
   - 테스트를 실행할 수 없음 (당신이 실행해야 함)
   - 데이터베이스 마이그레이션 검증 불가
   - 실제 API 응답 테스트 불가

---

## 📊 Claude Code 효과성 측정

### 추적할 지표

| 지표 | Claude 없이 | Claude 사용 | 개선율 |
|------|------------|------------|--------|
| **요구사항 단계** | 5일 | 2일 | 60% 빠름 |
| **디자인 시스템 생성** | 3일 | 1일 | 67% 빠름 |
| **Resolver 구현** | 2시간/resolver | 30분/resolver | 75% 빠름 |
| **컴포넌트 개발** | 3시간/컴포넌트 | 1시간/컴포넌트 | 67% 빠름 |
| **테스트 케이스 생성** | 기능당 1시간 | 기능당 15분 | 75% 빠름 |
| **문서화 커버리지** | 40% | 95% | 훨씬 나음 |

### 품질 지표

- **코드 일관성**: 높음 (컨벤션을 엄격하게 따름)
- **타입 안전성**: 나음 (더 많은 엣지 케이스 포착)
- **테스트 커버리지**: 높음 (포괄적인 테스트 생성)
- **문서화**: 훨씬 나음 (코드와 함께 문서 작성)
- **보안**: 나음 (OWASP 모범 사례 제안)

---

## 🚀 빠른 시작 체크리스트

### Claude에게 질문하기 전

- [ ] 관련 요구사항 읽기
- [ ] 기존 문서 확인
- [ ] 코딩 컨벤션 검토
- [ ] 필요한 구체적 산출물 식별
- [ ] 예제 코드 준비 (유사 패턴 요청 시)

### Claude에게 질문할 때

- [ ] 전체 컨텍스트 제공 (기술 스택, 요구사항, 컨벤션)
- [ ] 경로로 특정 문서 참조
- [ ] 필요한 것을 구체적으로 명시
- [ ] 인수 기준 포함
- [ ] 제약사항 언급 (성능, 접근성)

### Claude 응답 후

- [ ] 코드를 주의 깊게 검토 (맹목적으로 수용하지 말 것)
- [ ] 코드 테스트 (실행해보기!)
- [ ] 특정 요구사항에 맞게 조정
- [ ] 필요시 문서 업데이트
- [ ] 의미 있는 메시지로 커밋

---

## 🎓 학습 경로

### 1주차: 요구사항
**목표**: Claude를 사용하여 포괄적인 요구사항 생성

**연습**:
1. Claude에게 프로젝트 개요 생성 요청
2. 기능 요구사항 생성
3. 엣지 케이스 식별
4. 추적 매트릭스 생성

**성공**: 팀이 승인한 20개 이상의 문서화된 요구사항 보유

---

### 2주차: 디자인
**목표**: Claude를 사용하여 디자인 시스템과 컴포넌트 생성

**연습**:
1. 디자인 토큰 생성
2. 컴포넌트 계층 구조 생성
3. 와이어프레임 디자인
4. 컴포넌트 명세 생성

**성공**: 구현 준비가 완료된 완전한 디자인 시스템

---

### 3-6주차: 개발
**목표**: Claude를 사용하여 프로덕션 코드 생성

**연습**:
1. 데이터베이스 스키마 생성
2. GraphQL resolver 생성
3. React 컴포넌트 구축
4. 테스트 작성

**성공**: 90% 이상 테스트 커버리지를 갖춘 작동하는 인증 시스템

---

## 💡 전문가 팁

### 1. 문서를 최신 상태로 유지

```bash
# 코드 변경 후마다 문서 업데이트
git add src/lib/auth/jwt.ts
git add _docs/06-development/backend/02-implementation.md
git commit -m "feat: JWT 토큰 갱신 구현

- 토큰 로테이션 추가
- 재사용 공격 탐지
- 구현 문서 업데이트"
```

### 2. 코드 리뷰에 Claude 활용

```
당신: "이 resolver의 보안 이슈와 모범 사례를 검토해줘 [코드 붙여넣기]"
Claude: [5개 보안 문제 + 3개 최적화 기회 식별]
당신: [문제 수정, Claude에게 검증 요청]
```

### 3. 테스트 먼저 생성 (TDD)

```
당신: "사용자 로그인 요구사항 REQ-AUTH-003에 대한 테스트 케이스를 생성해줘"
Claude: [15개 테스트 케이스]
당신: "이 케이스들에 대한 테스트 코드를 생성해줘"
Claude: [완전한 테스트 스위트]
당신: "이제 이 테스트들을 통과하는 resolver를 생성해줘"
Claude: [작동하는 resolver]
```

### 4. 프롬프트 라이브러리 구축

최고의 프롬프트를 재사용을 위해 저장:

```markdown
# 나의 프롬프트 라이브러리

## GraphQL Resolver 생성
[표준 템플릿 붙여넣기]

## React 폼 컴포넌트 생성
[표준 템플릿 붙여넣기]

## 유닛 테스트 생성
[표준 템플릿 붙여넣기]
```

---

## 📚 관련 문서

- [프로젝트 README](./README.kr.md) - 예제 개요
- [워크플로우 타임라인](./WORKFLOW-TIMELINE.kr.md) - 일별 진행 상황
- [요구사항 프롬프트](./01-requirements/claude-prompts.md)
- [디자인 프롬프트](./02-design/claude-prompts.md)
- [개발 프롬프트](./06-development/claude-prompts.md)

---

**핵심 요점**: Claude Code는 잘 관리된 문서를 통해 포괄적인 컨텍스트를 제공할 때 가장 효과적입니다. 문서화에 투자한 시간은 더 빠르고 고품질의 코드 생성으로 보상받습니다.

**프로젝트 성공**: 이 예제 프로젝트는 코드의 약 80%가 Claude에 의해 생성/검토되었으며, 8주(개발자 1명)에 완료되었고, 90% 이상의 테스트 커버리지와 포괄적인 문서화를 갖추고 있습니다.
